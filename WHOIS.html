

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Legacy Whois Lookups &mdash; ipwhois 0.13.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ipwhois 0.13.0 documentation" href="index.html"/>
        <link rel="next" title="Utilities" href="UTILS.html"/>
        <link rel="prev" title="RDAP (HTTP) Lookups" href="RDAP.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ipwhois
          

          
          </a>

          
            
            
              <div class="version">
                0.13.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="README.html">Readme</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="RDAP.html">RDAP API (Recommended)</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Legacy Whois API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#input">Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="#output">Output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#results-dictionary">Results Dictionary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Network Dictionary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Referral Dictionary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage-examples">Usage Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-networks-listed-and-referral-whois">Multiple networks listed and referral whois</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="UTILS.html">Utilities API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CLI.html">CLI</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">Contributing</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGES.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGES.old.html">Changelog (Archive)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ipwhois</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Legacy Whois Lookups</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="legacy-whois-lookups">
<h1>Legacy Whois Lookups<a class="headerlink" href="#legacy-whois-lookups" title="Permalink to this headline">¶</a></h1>
<p>IPWhois.lookup() is deprecated as of v0.12.0 and will be removed. Legacy whois
lookups were moved to IPWhois.lookup_whois().</p>
<p>Parsing is currently limited to the keys in the output
<a class="reference external" href="#results-dictionary">below</a>.
This is assuming that those fields are present (for both whois and rwhois).</p>
<p>Some IPs have parent networks listed. The parser attempts to recognize this,
and break the networks into individual dictionaries. If a single network has
multiple CIDRs, they will be separated by &#8216;, &#8216;.</p>
<p>Sometimes, you will see whois information with multiple consecutive same name
fields, e.g., Description: some text\nDescription: more text. The parser will
recognize this and the returned result will have the values separated by &#8216;\n&#8217;.</p>
<div class="section" id="input">
<h2>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>Arguments supported by IPWhois.lookup_whois().</p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="11%" />
<col width="57%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Key</strong></td>
<td><strong>Type</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>inc_raw</td>
<td>Bool</td>
<td>Boolean for whether to include the raw
whois results in the returned dictionary.</td>
</tr>
<tr class="row-odd"><td>retry_count</td>
<td>Int</td>
<td>The number of times to retry in case
socket errors, timeouts, connection
resets, etc. are encountered.</td>
</tr>
<tr class="row-even"><td>get_referral</td>
<td>Bool</td>
<td>Boolean for whether to retrieve
referral whois information, if available.</td>
</tr>
<tr class="row-odd"><td>extra_blacklist</td>
<td>List</td>
<td>A list of blacklisted whois servers in
addition to the global BLACKLIST.</td>
</tr>
<tr class="row-even"><td>ignore_referral_errors</td>
<td>Bool</td>
<td>Boolean for whether to ignore and
continue when an exception is encountered
on referral whois lookups.</td>
</tr>
<tr class="row-odd"><td>field_list</td>
<td>List</td>
<td>If provided, a list of fields to parse:
[&#8216;name&#8217;, &#8216;handle&#8217;, &#8216;description&#8217;,
&#8216;country&#8217;, &#8216;state&#8217;, &#8216;city&#8217;, &#8216;address&#8217;,
&#8216;postal_code&#8217;, &#8216;emails&#8217;, &#8216;created&#8217;,
&#8216;updated&#8217;]</td>
</tr>
<tr class="row-even"><td>asn_alts</td>
<td>List</td>
<td>Array of additional lookup types to
attempt if the ASN dns lookup fails.
Allow permutations must be enabled.
Defaults to all [&#8216;whois&#8217;, &#8216;http&#8217;].</td>
</tr>
<tr class="row-odd"><td>extra_org_map</td>
<td>Dict</td>
<td>Dictionary mapping org handles to RIRs.
This is for limited cases where ARIN
REST (ASN fallback HTTP lookup) does not
show an RIR as the org handle e.g., DNIC
(which is now built in ORG_MAP)
e.g., {&#8216;DNIC&#8217;: &#8216;arin&#8217;}
Valid RIR values are (note the
case-sensitive - this is meant to match
the REST result):  &#8216;ARIN&#8217;, &#8216;RIPE&#8217;,
&#8216;apnic&#8217;, &#8216;lacnic&#8217;, &#8216;afrinic&#8217;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<div class="section" id="results-dictionary">
<h3>Results Dictionary<a class="headerlink" href="#results-dictionary" title="Permalink to this headline">¶</a></h3>
<p>The output dictionary from IPWhois.lookup_whois().</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="11%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Key</strong></td>
<td><strong>Type</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>query</td>
<td>String</td>
<td>The IP address input</td>
</tr>
<tr class="row-odd"><td>asn</td>
<td>String</td>
<td>Globally unique identifier used for routing
information exchange with Autonomous Systems.</td>
</tr>
<tr class="row-even"><td>asn_cidr</td>
<td>String</td>
<td>Network routing block assigned to an ASN.</td>
</tr>
<tr class="row-odd"><td>asn_country_code</td>
<td>String</td>
<td>ASN assigned country code in ISO 3166-1 format.</td>
</tr>
<tr class="row-even"><td>asn_date</td>
<td>String</td>
<td>ASN allocation date in ISO 8601 format.</td>
</tr>
<tr class="row-odd"><td>asn_registry</td>
<td>String</td>
<td>ASN assigned regional internet registry.</td>
</tr>
<tr class="row-even"><td>nets</td>
<td>List</td>
<td>List of network dictionaries.
See <a class="reference external" href="#network-dictionary">Network Dictionary</a>.</td>
</tr>
<tr class="row-odd"><td>raw</td>
<td>String</td>
<td>Raw whois results if inc_raw is True.</td>
</tr>
<tr class="row-even"><td>referral</td>
<td>Dict</td>
<td>Referral whois information if get_referral
is True and the server isn&#8217;t blacklisted. See
<a class="reference external" href="#referral-dictionary">Referral Dictionary</a>.</td>
</tr>
<tr class="row-odd"><td>raw_referral</td>
<td>String</td>
<td>Raw referral whois results if the inc_raw
parameter is True.</td>
</tr>
</tbody>
</table>
<div class="section" id="id1">
<h4>Network Dictionary<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The dictionary mapped to the nets key in the
<a class="reference external" href="#results-dictionary">Results Dictionary</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="11%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Key</strong></td>
<td><strong>Type</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>cidr</td>
<td>String</td>
<td>Network routing block an IP address belongs to.</td>
</tr>
<tr class="row-odd"><td>range</td>
<td>String</td>
<td>Network range an IP address belongs to.</td>
</tr>
<tr class="row-even"><td>name</td>
<td>String</td>
<td>The identifier assigned to the network registration
for an IP address.</td>
</tr>
<tr class="row-odd"><td>handle</td>
<td>String</td>
<td>Unique identifier for a registered network.</td>
</tr>
<tr class="row-even"><td>description</td>
<td>String</td>
<td>Description for a registered network.</td>
</tr>
<tr class="row-odd"><td>country</td>
<td>String</td>
<td>Country code registered with the RIR in
ISO 3166-1 format.</td>
</tr>
<tr class="row-even"><td>state</td>
<td>String</td>
<td>State for a registered network (if applicable).</td>
</tr>
<tr class="row-odd"><td>city</td>
<td>String</td>
<td>City for a registered network (if applicable).</td>
</tr>
<tr class="row-even"><td>address</td>
<td>String</td>
<td>The mailing address for a registered network.</td>
</tr>
<tr class="row-odd"><td>postal_code</td>
<td>String</td>
<td>The postal code for a registered network.</td>
</tr>
<tr class="row-even"><td>emails</td>
<td>String</td>
<td>The email addresses listed for a registered network,
separated by &#8216;n&#8217;</td>
</tr>
<tr class="row-odd"><td>created</td>
<td>String</td>
<td>Network registration date in ISO 8601 format.</td>
</tr>
<tr class="row-even"><td>updated</td>
<td>String</td>
<td>Network registration updated date in ISO 8601 format.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id3">
<h4>Referral Dictionary<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The dictionary mapped to the referral key in the
<a class="reference external" href="#results-dictionary">Results Dictionary</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="11%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Key</strong></td>
<td><strong>Type</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="row-even"><td>cidr</td>
<td>String</td>
<td>Network routing block an IP address belongs to.</td>
</tr>
<tr class="row-odd"><td>range</td>
<td>String</td>
<td>Network range an IP address belongs to.</td>
</tr>
<tr class="row-even"><td>name</td>
<td>String</td>
<td>The identifier assigned to the network registration
for an IP address.</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>String</td>
<td>Description for a registered network.</td>
</tr>
<tr class="row-even"><td>country</td>
<td>String</td>
<td>Country code registered in ISO 3166-1 format.</td>
</tr>
<tr class="row-odd"><td>state</td>
<td>String</td>
<td>State for a registered network (if applicable).</td>
</tr>
<tr class="row-even"><td>city</td>
<td>String</td>
<td>City for a registered network (if applicable).</td>
</tr>
<tr class="row-odd"><td>address</td>
<td>String</td>
<td>The mailing address for a registered network.</td>
</tr>
<tr class="row-even"><td>postal_code</td>
<td>String</td>
<td>The postal code for a registered network.</td>
</tr>
<tr class="row-odd"><td>emails</td>
<td>String</td>
<td>The email addresses listed for a registered network,
separated by &#8216;n&#8217;.</td>
</tr>
<tr class="row-even"><td>created</td>
<td>String</td>
<td>Network registration date in ISO 8601 format.</td>
</tr>
<tr class="row-odd"><td>updated</td>
<td>String</td>
<td>Network registration updated date in ISO 8601 format.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="usage-examples">
<h2>Usage Examples<a class="headerlink" href="#usage-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-usage">
<h3>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;&gt; from ipwhois import IPWhois</span>
<span class="go">&gt;&gt;&gt;&gt; from pprint import pprint</span>

<span class="go">&gt;&gt;&gt;&gt; obj = IPWhois(&#39;74.125.225.229&#39;)</span>
<span class="go">&gt;&gt;&gt;&gt; results = obj.lookup_whois()</span>
<span class="go">&gt;&gt;&gt;&gt; pprint(results)</span>

<span class="go">{</span>
<span class="go">&#39;asn&#39;: &#39;15169&#39;,</span>
<span class="go">&#39;asn_cidr&#39;: &#39;74.125.225.0/24&#39;,</span>
<span class="go">&#39;asn_country_code&#39;: &#39;US&#39;,</span>
<span class="go">&#39;asn_date&#39;: &#39;2007-03-13&#39;,</span>
<span class="go">&#39;asn_registry&#39;: &#39;arin&#39;,</span>
<span class="go">&#39;nets&#39;: [{&#39;address&#39;: &#39;1600 Amphitheatre Parkway&#39;,</span>
<span class="go">      &#39;cidr&#39;: &#39;74.125.0.0/16&#39;,</span>
<span class="go">      &#39;city&#39;: &#39;Mountain View&#39;,</span>
<span class="go">      &#39;country&#39;: &#39;US&#39;,</span>
<span class="go">      &#39;created&#39;: &#39;2007-03-13&#39;,</span>
<span class="go">      &#39;description&#39;: &#39;Google Inc.&#39;,</span>
<span class="go">      &#39;emails&#39;: &#39;arin-contact@google.com\nnetwork-abuse@google.com&#39;,</span>
<span class="go">      &#39;handle&#39;: &#39;NET-74-125-0-0-1&#39;,</span>
<span class="go">      &#39;name&#39;: &#39;GOOGLE&#39;,</span>
<span class="go">      &#39;postal_code&#39;: &#39;94043&#39;,</span>
<span class="go">      &#39;range&#39;: &#39;74.125.0.0 - 74.125.255.255&#39;,</span>
<span class="go">      &#39;state&#39;: &#39;CA&#39;,</span>
<span class="go">      &#39;updated&#39;: &#39;2012-02-24&#39;}],</span>
<span class="go">&#39;query&#39;: &#39;74.125.225.229&#39;,</span>
<span class="go">&#39;raw&#39;: None,</span>
<span class="go">&#39;raw_referral&#39;: None,</span>
<span class="go">&#39;referral&#39;: None</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-networks-listed-and-referral-whois">
<h3>Multiple networks listed and referral whois<a class="headerlink" href="#multiple-networks-listed-and-referral-whois" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;&gt; from ipwhois import IPWhois</span>
<span class="go">&gt;&gt;&gt;&gt; from pprint import pprint</span>

<span class="go">&gt;&gt;&gt;&gt; obj = IPWhois(&#39;38.113.198.252&#39;)</span>
<span class="go">&gt;&gt;&gt;&gt; results = obj.lookup_whois(get_referral=True)</span>
<span class="go">&gt;&gt;&gt;&gt; pprint(results)</span>

<span class="go">{</span>
<span class="go">&#39;asn&#39;: &#39;174&#39;,</span>
<span class="go">&#39;asn_cidr&#39;: &#39;38.0.0.0/8&#39;,</span>
<span class="go">&#39;asn_country_code&#39;: &#39;US&#39;,</span>
<span class="go">&#39;asn_date&#39;: &#39;&#39;,</span>
<span class="go">&#39;asn_registry&#39;: &#39;arin&#39;,</span>
<span class="go">&#39;nets&#39;: [{&#39;address&#39;: &#39;2450 N Street NW&#39;,</span>
<span class="go">       &#39;cidr&#39;: &#39;38.0.0.0/8&#39;,</span>
<span class="go">       &#39;city&#39;: &#39;Washington&#39;,</span>
<span class="go">       &#39;country&#39;: &#39;US&#39;,</span>
<span class="go">       &#39;created&#39;: &#39;1991-04-16&#39;,</span>
<span class="go">       &#39;description&#39;: &#39;PSINet, Inc.&#39;,</span>
<span class="go">       &#39;emails&#39;: &#39;noc@cogentco.com\n&#39;</span>
<span class="go">                 &#39;abuse@cogentco.com\n&#39;</span>
<span class="go">                 &#39;ipalloc@cogentco.com&#39;,</span>
<span class="go">       &#39;handle&#39;: &#39;NET-38-0-0-0-1&#39;,</span>
<span class="go">       &#39;name&#39;: &#39;COGENT-A&#39;,</span>
<span class="go">       &#39;postal_code&#39;: &#39;20037&#39;,</span>
<span class="go">       &#39;range&#39;: &#39;38.0.0.0 - 38.255.255.255&#39;,</span>
<span class="go">       &#39;state&#39;: &#39;DC&#39;,</span>
<span class="go">       &#39;updated&#39;: &#39;2011-05-20&#39;},</span>
<span class="go">      {&#39;address&#39;: &#39;2450 N Street NW&#39;,</span>
<span class="go">       &#39;cidr&#39;: &#39;38.112.0.0/13&#39;,</span>
<span class="go">       &#39;city&#39;: &#39;Washington&#39;,</span>
<span class="go">       &#39;country&#39;: &#39;US&#39;,</span>
<span class="go">       &#39;created&#39;: &#39;2003-08-20&#39;,</span>
<span class="go">       &#39;description&#39;: &#39;PSINet, Inc.&#39;,</span>
<span class="go">       &#39;emails&#39;: &#39;noc@cogentco.com\n&#39;</span>
<span class="go">                 &#39;abuse@cogentco.com\n&#39;</span>
<span class="go">                 &#39;ipalloc@cogentco.com&#39;,</span>
<span class="go">       &#39;handle&#39;: &#39;NET-38-112-0-0-1&#39;,</span>
<span class="go">       &#39;name&#39;: &#39;COGENT-NB-0002&#39;,</span>
<span class="go">       &#39;postal_code&#39;: &#39;20037&#39;,</span>
<span class="go">       &#39;range&#39;: None,</span>
<span class="go">       &#39;state&#39;: &#39;DC&#39;,</span>
<span class="go">       &#39;updated&#39;: &#39;2004-03-11&#39;}],</span>
<span class="go">&#39;query&#39;: &#39;38.113.198.252&#39;,</span>
<span class="go">&#39;raw&#39;: None,</span>
<span class="go">&#39;raw_referral&#39;: None,</span>
<span class="go">&#39;referral&#39;: {&#39;address&#39;: &#39;1015 31st St NW&#39;,</span>
<span class="go">             &#39;city&#39;: &#39;Washington&#39;,</span>
<span class="go">             &#39;country&#39;: &#39;US&#39;,</span>
<span class="go">             &#39;description&#39;: &#39;Cogent communications - IPENG&#39;,</span>
<span class="go">             &#39;name&#39;: &#39;NET4-2671C60017&#39;,</span>
<span class="go">             &#39;postal_code&#39;: &#39;20007&#39;,</span>
<span class="go">             &#39;state&#39;: &#39;DC&#39;,</span>
<span class="go">             &#39;updated&#39;: &#39;2007-09-18 22:02:09&#39;}</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="UTILS.html" class="btn btn-neutral float-right" title="Utilities" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="RDAP.html" class="btn btn-neutral" title="RDAP (HTTP) Lookups" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Philip Hane.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.13.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>